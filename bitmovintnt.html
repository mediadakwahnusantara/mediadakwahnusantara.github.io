<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="https://mediadakwahnusantara.github.io/bitmovin.css">
    <script type="text/javascript" src="https://bitmovin-a.akamaihd.net/bitmovin-player/stable/7.8/bitmovinplayer.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://mediadakwahnusantara.github.io/bitmovin.js"></script>
    <script src="https://vibetv.github.io/devtool.js"></script>
    <style>
        .bmpui-ui-skin-modern .bmpui-ui-seekbar .bmpui-seekbar .bmpui-seekbar-playbackposition,
        .bmpui-ui-skin-modern .bmpui-ui-volumeslider .bmpui-seekbar .bmpui-seekbar-playbackposition {
            background-color: #222028;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Open Sans', sans-serif;
            color: #fff;
            font-weight: 300;
        }

        .bmpui-ui-watermark {
            display: none !important;
        }
    </style>
</head>

<body>
    <div id="my-player"></div>
    <script>
        $(document).ready(function() {

            $(document)[0].oncontextmenu = function() {
                return false;
            }

            $(document).mousedown(function(e) {
                if (e.button == 2) {
                    return false;
                } else {
                    return true;
                }
            });
        });
        async function getDashManifestUrl() {
            try {
                const response = await fetch('https://cbd46b77.cdn.cms.movetv.com/playermetadata/sling/v1/api/channels/23a92a8fb160489b97fd746536551d50/schedule/now/playback_info.qvt');
                const data = await response.json();
                if (data.playback_info && data.playback_info.dash_manifest_url) {

                    var rand = Math.floor(Math.random() * (999 - 100 + 1) + 100);
                    var playReadyLaURL = 'https://p-drmwv.movetv.com/widevine/proxy';
                    var widevineLaURL = 'https://p-drmwv.movetv.com/widevine/proxy';

                    $(document).ready(function() {
                        var conf = {
                            key: 'Y2tvaWtjY29lbSEqXyVrZG9lYTJzZT9yb201ZGFzaXMzMGRiMEElXzo=',
                            style: {
                                width: '100%',
                                aspectratio: '16:9',
                                controls: true
                            },
                            source: {
                                dash: 'https://images112-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&url=' + data.playback_info.dash_manifest_url,
                                poster: "https://i.ibb.co/LpbbsYm/Untitled-1.png",
                                drm: {
                                    widevine: {
                                        LA_URL: widevineLaURL,
                                        prepareMessage: function(keyMessage) {
                                            return JSON.stringify({
                                                'env': 'production',
                                                'user_id': 'eb719602-6ae6-11e9-a061-0a905c1a333e',
                                                'channel_id': '0c6964d26bcd450cb7d8c8af10b9da20',
                                                'message': Array.apply(null, new Uint8Array(keyMessage.message))
                                            });
                                        }
                                    },
                                    playready: {
                                        LA_URL: playReadyLaURL,

                                    },
                                }
                            },
                            network: {
                                preprocessHttpRequest: function(type, request) {
                                    if (type === bitmovin.player.network.REQUEST_TYPE.DRM_LICENSE_WIDEVINE) {
                                        request.method = 'POST';
                                        request.headers.push({
                                            name: 'Authorization',
                                            value: 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjM1Mzg2NjY1LTMzNjQtNjMzNy0zMjY0LTM5MzUzNTY2Mzk2NCJ9.eyJ1c2VyX2d1aWQiOiIyYzAzNjY0YS01ZjA2LTExZTYtODU1YS0wZTE3YThlYTU5NDEiLCJjaGFubmVsX2d1aWQiOiIyM2E5MmE4ZmIxNjA0ODliOTdmZDc0NjUzNjU1MWQ1MCIsImR5bmFfaWQiOiIxOCIsInF2dCI6Imh0dHBzOi8vY2JkNDZiNzcuY2RuLmNtcy5tb3ZldHYuY29tL3BsYXllcm1ldGFkYXRhL3NsaW5nL3YxL2FwaS9jaGFubmVscy8yM2E5MmE4ZmIxNjA0ODliOTdmZDc0NjUzNjU1MWQ1MC9jdXJyZW50L3NjaGVkdWxlLnF2dCJ9.OYe_Rln-vB6N2dQaSzoCgq5bHVGaut-2vOQFcQA9eazkC5FawTM5UDe2Z5pQCg6Gq9ThUYLMqHE5t8WVJMoIM0HUY7HJRTCYa083n-gpcYW2pBmV9HyQFnqayM9578fE_LlgtlD_a4Mcq86TFucOIpuKb-p42JwTdxCKE90SiASz41I5-_314d-kGv_nThoo2jqZQlb6cKZ3LPlCZpz4SkEmSvQxHfZVbEIdOJPiN7cBeP-pXRpqcg4e75zNNyL43XLrB_uectprYwRCOhYtZ2_B_lDGyFxk93dBXwLsnmNZTvyiPbYm9azNJniilrGslQ-UDXmIYl-v7oFhBUEHAw'
                                        });

                                        return Promise.resolve(request);

                                    }
                                    if (request.url.includes('.mp4') || request.url.includes('.m4s')) {
                                        request.url = 'https://images112-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&url=' + request.url;
                                    }




                                    return request;
                                }
                            },
                        };

                        var player = bitmovin.player('my-player');

                        player.setup(conf).then(
                            function(value) {
                                // Success
                                console.log('Successfully created bitmovin player instance');
                            },
                            function(reason) {
                                // Error!
                                console.log('Error while creating bitmovin player instance');
                            }
                        );
                    });



                } else {
                    throw new Error('bad data.playback_info.dash_manifest_url');
                }
            } catch (error) {
                throw new Error(error);
            }
        }
        getDashManifestUrl();
    </script>
    <script src="https://vibetv.github.io/devtool.js"></script>

</body>

</html>